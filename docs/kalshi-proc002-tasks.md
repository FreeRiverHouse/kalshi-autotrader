# PROC-002 Kalshi Task Tree — Generated by Grok

## Round 1: 8 completed → 16 new tasks

### From Task 1 (API keys → env vars) ✅
- **1.1** Add .env file fallback via python-dotenv
- **1.2** Credential rotation check: warn if keys >90 days old

### From Task 2 (Settlement fix) ✅
- **2.1** Settlement reason tagging: store YES=1/NO=0, realized PnL per position
- **2.2** Partial settlement handling: match remaining open quantity

### From Task 3 (MAX_POSITIONS + balance guard) ✅
- **3.1** Dynamic max positions based on balance (min 5, scale with growth)
- **3.2** Portfolio concentration guard: skip if single asset >30% risk capital

### From Task 4 (% drawdown tracking) ✅
- **4.1** Rolling Sharpe ratio tracking (30/90-day), warn if <0.5
- **4.2** Recovery mode: if drawdown >10%, halve Kelly until recovery

### From Task 5 (Vol BTC 0.96%, ETH 1.18%) ✅
- **5.1** ⭐ Fetch real-time vol from CoinGecko (7d hourly std dev of log returns)
- **5.2** ⭐ Vol regime classifier: high/low vol → adjust MIN_EDGE and Kelly

### From Task 6 (Calibration 0.75) ✅
- **6.1** ⭐ Adaptive calibration per-market (Brier score → dynamic shrinkage)
- **6.2** Overconfidence decay: -0.003/hr past 48h for stale forecasts

### From Task 7 (Fee/slippage 0.7%) ✅
- **7.1** ⭐ Dynamic slippage from order book depth
- **7.2** Minimum liquidity filter: skip if depth < 10× intended size

### From Task 8 (Kelly 0.25 + $2 max) ✅
- **8.1** Percentage-based cap (1% balance) instead of fixed $2
- **8.2** ⭐ Correlation-aware sizing BTC-ETH (reduce if corr >0.85)

## Priority Order (⭐ = high impact)
1. 5.1 — Dynamic vol from CoinGecko
2. 5.2 — Vol regime classifier
3. 7.1 — Dynamic slippage from orderbook
4. 6.1 — Adaptive calibration per-market
5. 8.2 — Correlation-aware sizing
6. 4.2 — Recovery mode
7. 3.1 — Dynamic max positions
8. 7.2 — Liquidity filter
